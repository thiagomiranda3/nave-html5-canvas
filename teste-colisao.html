<!DOCTYPE html>

<html>
    <head>
        <title>Detecção de Colisões</title>
        <script src="bola.js"></script>
        <script src="colisor.js"></script>
    </head>

    <body>
        <canvas id="meu_canvas" width="500" height="500"></canvas>

        <script>
            var ctx = document.getElementById("meu_canvas").getContext("2d")

            let b1 = new Bola(ctx)
            b1.x = 200
            b1.y = 200
            b1.velocidadeX = 5
            b1.velocidadeY = 10
            b1.cor = "blue"
            b1.raio = 20

            let b2 = new Bola(ctx)
            b2.x = 300
            b2.y = 300
            b2.velocidadeX = -5
            b2.velocidadeY = -5
            b2.cor = "red"
            b2.raio = 30

            let colisor = new Colisor()
            colisor.novoSprite(b1)
            colisor.novoSprite(b2)

            colisor.aoColidir = function (s1, s2) {
                alert("PÁ")
            }

            requestAnimationFrame(animar)

            function animar () {
                // limpa a tela
                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)

                // atualiza os sprites
                b1.atualizar()
                b2.atualizar()

                // desenha os sprites
                b1.desenhar()
                b2.desenhar()

                // processar colisões
                colisor.processar()

                requestAnimationFrame(animar)
            }
        </script>
    </body>
</html>