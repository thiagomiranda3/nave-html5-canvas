<!DOCTYPE html>

<html>
    <head>
        <title>Fundo rolando em Parallax</title>
        <script src="animacao.js"></script>
        <script src="fundo.js"></script>
    </head>

    <body>
        <canvas id="meu_canvas" width="500" height="500"></canvas>
        <script>
            let carregadas = 0
            let totalImagens = 3

            var imgEspaco = new Image()
            imgEspaco.src = "img/fundo-espaco.png"
            imgEspaco.onload = carregando

            var imgEstrelas = new Image()
            imgEstrelas.src = "img/fundo-estrelas.png"
            imgEstrelas.onload = carregando

            var imgNuvens = new Image()
            imgNuvens.src = "img/fundo-nuvens.png"
            imgNuvens.onload = carregando

            function carregando () {
                carregadas++
                if(carregadas == totalImagens) iniciar()
            }

            function iniciar () {
                let canvas = document.getElementById("meu_canvas")
                let context = canvas.getContext("2d")

                // passando o context e imagens para o objeto Fundo
                let fundoEspaco = new Fundo(context, imgEspaco)
                let fundoEstrelas = new Fundo(context, imgEstrelas)
                let fundoNuvens = new Fundo(context, imgNuvens)

                fundoEspaco.velocidade = 3
                fundoEstrelas.velocidade = 7
                fundoNuvens.velocidade = 10

                let animacao = new Animacao(context)
                animacao.novoSprite(fundoEspaco)
                animacao.novoSprite(fundoEstrelas)
                animacao.novoSprite(fundoNuvens)
                animacao.ligar()
            }
        </script>
    </body>
</html>
